# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –Ω–æ–≤—ã–π –¥–∏—Å–∫

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ MM Shop –Ω–∞ –Ω–æ–≤—ã–π –¥–∏—Å–∫ —Å –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º –º–µ—Å—Ç–∞.

## üéØ –¶–µ–ª—å

–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–ë–î, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –ª–æ–≥–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) –Ω–∞ –Ω–æ–≤—ã–π –¥–∏—Å–∫, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–∏—Å–∫–µ.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –Ω–æ–≤–æ–º –¥–∏—Å–∫–µ

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ `/mnt/mm_shop_data/`:

```
/mnt/mm_shop_data/
‚îú‚îÄ‚îÄ postgres_data/     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
‚îú‚îÄ‚îÄ redis_data/        # –î–∞–Ω–Ω—ã–µ Redis (–∫—ç—à)
‚îú‚îÄ‚îÄ images/            # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ variations/    # –§–æ—Ç–æ –≤–∞—Ä–∏–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ products/      # –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ uploads/       # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ categories/    # –ò–∫–æ–Ω–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ avatars/       # –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ shop_logos/    # –õ–æ–≥–æ—Ç–∏–ø—ã –º–∞–≥–∞–∑–∏–Ω–æ–≤
‚îú‚îÄ‚îÄ logs/              # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ updates/           # –§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ libiss_pos/        # –§–∞–π–ª—ã Libiss POS
```

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–∏—Å–∫–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: DigitalOcean Block Storage (–≤–∞—à —Å–ª—É—á–∞–π)

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å Block Storage Volume –≤ DigitalOcean (–Ω–∞–ø—Ä–∏–º–µ—Ä, "mm-shop-data" 50GB):

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∏—Å–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Droplet**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∏—Å–∫–∏
   lsblk
   
   # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏—Å–∫ (–æ–±—ã—á–Ω–æ /dev/sda, /dev/sdb –∏–ª–∏ /dev/sdc)
   ```

2. **–ù–∞–π–¥–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–∏—Å–∫–∞**:
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –±–ª–æ—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
   lsblk -f
   
   # –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ DigitalOcean ID
   ls -la /dev/disk/by-id/ | grep DO_Volume
   ```

3. **–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ –¥–∏—Å–∫** (–µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω):
   ```bash
   # –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ /dev/sdX –Ω–∞ –≤–∞—à –¥–∏—Å–∫! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ lsblk!
   # –û–±—ã—á–Ω–æ —ç—Ç–æ /dev/sda, /dev/sdb –∏–ª–∏ /dev/sdc
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –ª–∏ —É–∂–µ –¥–∏—Å–∫
   mount | grep mm_shop_data
   
   # –ï—Å–ª–∏ –¥–∏—Å–∫ –Ω–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ
   # ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ!
   sudo mkfs.ext4 -F /dev/sdX  # –ó–∞–º–µ–Ω–∏—Ç–µ sdX –Ω–∞ –≤–∞—à –¥–∏—Å–∫!
   ```

4. **–°–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–∏—Å–∫**:
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   sudo mkdir -p /mnt/mm_shop_data
   
   # –ú–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–∏—Å–∫ (–∑–∞–º–µ–Ω–∏—Ç–µ /dev/sdX –Ω–∞ –≤–∞—à!)
   sudo mount /dev/sdX /mnt/mm_shop_data
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
   df -h /mnt/mm_shop_data
   ```

5. **–î–æ–±–∞–≤—å—Ç–µ –≤ /etc/fstab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
   ```bash
   # –ü–æ–ª—É—á–∏—Ç–µ UUID –¥–∏—Å–∫–∞
   sudo blkid /dev/sdX  # –ó–∞–º–µ–Ω–∏—Ç–µ sdX –Ω–∞ –≤–∞—à –¥–∏—Å–∫
   
   # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É—Ç—å —á–µ—Ä–µ–∑ DigitalOcean ID (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   # –ù–∞–π–¥–∏—Ç–µ –ø—É—Ç—å:
   ls -la /dev/disk/by-id/ | grep DO_Volume
   
   # –î–æ–±–∞–≤—å—Ç–µ –≤ /etc/fstab (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ UUID –∏–ª–∏ –ø—É—Ç—å —á–µ—Ä–µ–∑ by-id)
   # –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ UUID
   echo "UUID=–≤–∞—à-uuid /mnt/mm_shop_data ext4 defaults,nofail,discard 0 2" | sudo tee -a /etc/fstab
   
   # –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ DigitalOcean ID (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   # echo "/dev/disk/by-id/scsi-0DO_Volume_mm-shop-data /mnt/mm_shop_data ext4 defaults,nofail,discard 0 2" | sudo tee -a /etc/fstab
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
   sudo mount -a
   ```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –û–±—ã—á–Ω—ã–π –¥–∏—Å–∫ (–Ω–µ DigitalOcean)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –Ω–æ–≤—ã–π –¥–∏—Å–∫** –∫ —Å–µ—Ä–≤–µ—Ä—É

2. **–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ –¥–∏—Å–∫** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –¥–∏—Å–∫–∞
   lsblk
   
   # –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ (–ó–ê–ú–ï–ù–ò–¢–ï /dev/sdb1 –Ω–∞ –≤–∞—à –¥–∏—Å–∫!)
   sudo mkfs.ext4 /dev/sdb1
   ```

3. **–°–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–∏—Å–∫**:
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   sudo mkdir -p /mnt/mm_shop_data
   
   # –ú–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–∏—Å–∫
   sudo mount /dev/sdb1 /mnt/mm_shop_data
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
   df -h /mnt/mm_shop_data
   ```

4. **–î–æ–±–∞–≤—å—Ç–µ –≤ /etc/fstab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
   ```bash
   # –ü–æ–ª—É—á–∏—Ç–µ UUID –¥–∏—Å–∫–∞
   sudo blkid /dev/sdb1
   
   # –î–æ–±–∞–≤—å—Ç–µ –≤ /etc/fstab (–∑–∞–º–µ–Ω–∏—Ç–µ UUID –Ω–∞ –≤–∞—à!)
   echo "UUID=–≤–∞—à-uuid /mnt/mm_shop_data ext4 defaults 0 2" | sudo tee -a /etc/fstab
   
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
   sudo mount -a
   ```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
cd /path/to/mm-shop
sudo chmod +x scripts/setup_new_disk.sh
sudo ./scripts/setup_new_disk.sh /mnt/mm_shop_data
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

### –®–∞–≥ 3: –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**‚ö†Ô∏è –í–ê–ñ–ù–û: –ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π —Å–¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î!**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∞–º–ø –ë–î
docker exec mm-postgres-prod pg_dump -U mm_user mm_shop_prod > backup_$(date +%Y%m%d_%H%M%S).sql

# –ò–ª–∏ –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π pg_dump
pg_dump -h localhost -U mm_user mm_shop_prod > backup_$(date +%Y%m%d_%H%M%S).sql
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
cd /path/to/mm-shop
sudo chmod +x scripts/migrate_to_new_disk.sh
sudo ./scripts/migrate_to_new_disk.sh /mnt/mm_shop_data
```

–°–∫—Ä–∏–ø—Ç:
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –°–∫–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –Ω–æ–≤—ã–π –¥–∏—Å–∫
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `docker-compose.release.yml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```yaml
volumes:
  - /mnt/mm_shop_data/postgres_data:/var/lib/postgresql/data
  - /mnt/mm_shop_data/redis_data:/data
  - /mnt/mm_shop_data/images:/app/images
  - /mnt/mm_shop_data/logs:/app/logs
  - /mnt/mm_shop_data/updates:/app/updates
  - /mnt/mm_shop_data/libiss_pos:/app/libiss_pos
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
cd /path/to/mm-shop
docker-compose -f docker-compose.release.yml up -d
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**:
   ```bash
   docker-compose -f docker-compose.release.yml logs -f api
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤**:
   ```bash
   curl http://localhost:8080/health
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**:
   ```bash
   du -sh /mnt/mm_shop_data/*
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ë–î

### –®–∞–≥ 7: –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –£–¥–∞–ª—è–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏!**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
sudo tar -czf old_data_backup_$(date +%Y%m%d).tar.gz ./images ./updates ./libiss_pos

# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (–û–°–¢–û–†–û–ñ–ù–û!)
# sudo rm -rf ./images ./updates ./libiss_pos
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞

```bash
# –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä
df -h /mnt/mm_shop_data

# –†–∞–∑–º–µ—Ä –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
du -sh /mnt/mm_shop_data/*

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
du -h --max-depth=2 /mnt/mm_shop_data
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–∏—Å–∫–∞ –≤ DigitalOcean

–ï—Å–ª–∏ –¥–∏—Å–∫ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ DigitalOcean, –Ω–æ –Ω–µ –≤–∏–¥–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ DigitalOcean CLI (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
doctl compute volume list

# 2. –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ API
curl -X GET -H "Authorization: Bearer YOUR_TOKEN" \
  "https://api.digitalocean.com/v2/volumes"

# 3. –ï—Å–ª–∏ –¥–∏—Å–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å DigitalOcean
# –∏–ª–∏ —á–µ—Ä–µ–∑ CLI:
doctl compute volume-action attach VOLUME_ID DROPLET_ID
```

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ DigitalOcean, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –ü–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
sudo partprobe

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∏—Å–∫–∏
lsblk

# –ù–∞–π–¥–∏—Ç–µ –≤–∞—à –¥–∏—Å–∫ (–æ–±—ã—á–Ω–æ —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π)
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∏—Å–∫ –Ω–µ –≤–∏–¥–µ–Ω –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ DigitalOcean

```bash
# –ü–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ SCSI —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
sudo rescan-scsi-bus

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
sudo reboot
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /mnt/mm_shop_data

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
sudo chown -R 999:999 /mnt/mm_shop_data/postgres_data
sudo chmod -R 755 /mnt/mm_shop_data/images
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∏—Å–∫ –Ω–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ /etc/fstab
cat /etc/fstab

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ UUID –¥–∏—Å–∫–∞
sudo blkid

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ /etc/fstab –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
sudo nano /etc/fstab
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –≤–∏–¥—è—Ç –¥–∞–Ω–Ω—ã–µ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—É—Ç–∏ –≤ `docker-compose.release.yml` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∏—Å–∫ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω: `df -h /mnt/mm_shop_data`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: `docker-compose -f docker-compose.release.yml restart`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞:

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab –ø—Ä–æ–≤–µ—Ä–∫—É –º–µ—Å—Ç–∞
crontab -e

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
0 */6 * * * df -h /mnt/mm_shop_data | mail -s "Disk Usage" admin@example.com
```

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è:

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
2. –ò–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –≤ `docker-compose.release.yml` –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å—Ç–∞—Ä—ã–µ
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –ø—É—Ç–∏ –≤ `docker-compose.release.yml` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ `/mnt/mm_shop_data/`
- –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

